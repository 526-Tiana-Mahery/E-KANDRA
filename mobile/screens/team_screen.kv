<TeamScreen>:
    md_bg_color: app.theme_cls.bg_light

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: root.team_name
            elevation: 2
            right_action_items: 
                [["account-plus", lambda x: root.invite_member()],
                 ["exit-to-app", lambda x: root.leave_team()]]

        MDScrollView:

            MDBoxLayout:
                orientation: 'vertical'
                padding: dp(16)
                spacing: dp(20)
                adaptive_height: True

                MDCard:
                    orientation: 'vertical'
                    padding: dp(16)
                    spacing: dp(12)
                    size_hint_y: None
                    height: dp(140)
                    elevation: 1

                    MDLabel:
                        text: "Description"
                        font_style: "H6"

                    MDLabel:
                        text: root.team_description or "Aucune description disponible"
                        theme_text_color: "Secondary"
                        markup: True

                MDCard:
                    orientation: 'vertical'
                    padding: dp(16)
                    spacing: dp(8)
                    elevation: 1

                    MDLabel:
                        text: f"Membres ({root.member_count})"
                        font_style: "H6"
                        size_hint_y: None
                        height: dp(32)

                    MDList:
                        for member in root.members:
                            OneLineAvatarListItem:
                                text: member.get('username', 'Utilisateur inconnu')
                                secondary_text: member.get('role', 'Membre')

                                IconLeftWidget:
                                    icon: "account-circle"
                                    theme_text_color: "Primary"

                                on_release: root.go_to_member_profile(member.get('id'))

                # Section projets liés (optionnelle)
                MDCard:
                    orientation: 'vertical'
                    padding: dp(16)
                    spacing: dp(12)
                    size_hint_y: None
                    height: dp(160) if root.projects_linked else 0
                    disabled: not root.projects_linked
                    elevation: 1

                    MDLabel:
                        text: "Projets associés"
                        font_style: "H6"

                    MDList:
                        for proj in root.projects_linked:
                            OneLineAvatarListItem:
                                text: proj.get('name', 'Projet')
                                secondary_text: f"Progression: {proj.get('progress', 0)}%"
                                on_release: root.manager.get_screen('kanban').project_id = proj['id']; root.manager.current = 'kanban'

                                IconLeftWidget:
                                    icon: "folder"

                Widget:
                    size_hint_y: None
                    height: dp(80)  # espace en bas
